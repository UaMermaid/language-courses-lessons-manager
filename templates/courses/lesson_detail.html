{% extends "base.html" %}
{% load bootstrap_icons %}

{% block content %}
  <h1 class="hero" style="max-height: 300px; text-align: center; padding: 20px">
    <p>{{ lesson.title }}</p>
    <p>{{ lesson.date_time|date:"d.m.Y" }} {{ lesson.date_time|time:"H:i" }} </p>
  </h1>
  <div class="w3-cell-row w3-center">
    <div class="w3-container w3-black w3-cell">
      <p>{{ lesson.language.name }}({{ lesson.level.level }})</p>
    </div>
    <div class="w3-container w3-black w3-cell w3-cell-middle">
      <ul>
      {% for student in lesson.students.all %}
        <li>{% bs_icon "emoji-smile" %} {{ student.first_name }} {{ student.last_name }}</li>
      {% endfor %}
      </ul>
      {% if lesson.language == user.student_language %}
        {% if lesson in user.lessons.all %}
        <a href="{% url 'courses:toggle-lesson-assign' pk=lesson.pk %}" class="btn btn-danger link-to-page">
          Delete me from this lesson
        </a>
        {% else %}
        <a href="{% url 'courses:toggle-lesson-assign' pk=lesson.pk %}" class="btn btn-success link-to-page">
          Assign me to this lesson
        </a>
        {% endif %}
      {% endif %}
    </div>
    <div class="w3-container w3-black w3-cell w3-cell-middle">
      <p>
      {% if lesson.is_approved %}
      Lesson is confirmed by teacher
      {% else %}
      Lesson isn't confirmed by teacher
      {% endif %}
      </p>
      <a href="{% url 'courses:lesson-delete' pk=lesson.pk %}" class="btn btn-danger">
        Delete
      </a>
      <a href="{% url 'courses:lesson-update' pk=lesson.pk %}" class="btn btn-secondary">
        Update
      </a>
      {% if user.is_staff %}
      <a href="{% url 'courses:confirm-lesson' pk=lesson.pk %}" class="btn btn-secondary">
        Confirm
      </a>
      {% endif %}
    </div>
  </div>


  <hr>

{% endblock %}
